services:
  joy:
    image: husarion/teleop-twist-joy:humble-2.4.5-20240318
    build:
      context: .
      dockerfile: Dockerfile
    devices:
      - /dev/input
    volumes:
      - ./joy_params.yaml:/joy_params.yaml
    command: ros2 run joy joy_node --ros-args --params-file /joy_params.yaml
    container_name: joy
    tty: true
    hostname: joy
    network_mode: host
    ipc: host
    restart: always
    environment:
      - RMW_IMPLEMENTATION=rmw_cyclonedds_cpp


  ktx_teleop_twist_joy:
    image: wonbot/shinheeagv:ktx_teleop_twist_joy_v.10
    build:
      context: .
      dockerfile: Dockerfile.ktx_teleop_twist_joy
    volumes:
      - ./amr_ws/src/teleop_twist_joy/config/ps3.config.yaml:/ps3.config.yaml:rw
    command: 
      ros2 run teleop_twist_joy teleop_node --ros-args --params-file /ps3.config.yaml -r __node:=joystick_teleop 
      #ros2 run teleop_twist_joy teleop_node --ros-args --params-file /ps3.config.yaml

    container_name: ktx_teleop_twist_joy
    tty: true
    hostname: ktx_teleop_twist_joy
    network_mode: host
    ipc: host
    restart: always
    environment:
      - RMW_IMPLEMENTATION=rmw_cyclonedds_cpp

  # teleop_twist_joy:
  #   build:
  #     context: .
  #     dockerfile: Dockerfile
  #   command: ros2 run teleop_twist_joy teleop_node --ros-args --params-file /teleop_twist_joy_f710_params.yaml
  #   volumes:
  #     - ./teleop_twist_joy_f710_params.yaml:/teleop_twist_joy_f710_params.yaml